server:
  port: 8081

spring:
  application:
    name: fast-problem-ticket-system
  profiles:
    # local = H2 (default for local dev); dev / prod = Oracle (org environments)
    active: local
  mvc:
    # Return 404 as JSON for unknown API paths (handled by GlobalExceptionHandler)
    throw-exception-if-no-handler-found: true
  jpa:
    open-in-view: false
    hibernate:
      ddl-auto: validate
    show-sql: true
    properties:
      hibernate:
        format_sql: true
        # Dialect overridden by profile: local=H2, dev/prod=Oracle
        dialect: org.hibernate.dialect.H2Dialect

# CORS: set CORS_ALLOWED_ORIGINS env (comma-separated) to add Cloudflare/public URLs
cors:
  allowed-origins: ${CORS_ALLOWED_ORIGINS:}

# Application Configuration
app:
  auth:
    mode: local  # Options: local, bam
    local:
      default-user: admin  # Default user for local development
  jwt:
    # Production: set APP_JWT_SECRET env to a strong 256-bit+ secret. Do not use default in production.
    secret: ${APP_JWT_SECRET:FAST-Enterprise-JWT-Secret-Key-2026-Problem-Ticket-System-256bit-Key}
    expiration-ms: 86400000  # 24 hours

# BAM SSO Configuration
bam:
  sso:
    url: https://bamuat-auth.client.companycorp.com/authn/authenticate/sso/api
  ad:
    url: http://internal-host:5000/api/getADUsers
  phonebook:
    # Profile photo: {phonebook.url}?brid={employeeId}
    url: ${BAM_PHONEBOOK_URL:}
  app:
    name: FORT
    redirect-url: http://internal-app-server:8095/api

springdoc:
  api-docs:
    path: /v3/api-docs
  swagger-ui:
    path: /swagger-ui.html
    operations-sorter: method

# Logging: file created automatically, rotated and archived by size and time
logging:
  file:
    name: ${LOG_FILE:logs/application.log}
  pattern:
    file: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
    console: "%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n"
  logback:
    rollingpolicy:
      file-name-pattern: logs/archive/application-%d{yyyy-MM-dd}.%i.log.gz
      max-file-size: 10MB
      max-history: 30
      total-size-cap: 500MB
      clean-history-on-start: false
